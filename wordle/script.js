function get(){var arr=location.search;var strs=arr.split("?")[1];if(strs==undefined){return undefined}var paramt=strs.split("&");var obj={};for(let i=0;i<paramt.length;i++){let g=paramt[i].split("=");obj[g[0]]=g[1]}return obj}import{wordl}from"./dict_l.js";import{wordml}from"./dict_ml.js";import{words}from"./dict_s.js";var geto=get();let wordu;if(geto===undefined){document.getElementsByTagName("body")[0].innerHTML="<h1>请选择难度: <br><a href=\"?w=s\">“这个wordle落点很低”（词量2315）</a><br><a href=\"?w=l\">“不可能！绝对不可能！”（词量14947）</a> </h1> ";wordu=wordl}else if(geto.w==='s'){wordu=words}else if(geto.w==='ml'){wordu=wordml}else{wordu=wordl}const guess=6;let guessesRemaining=guess,currentGuess=[],nextLetter=0,rightGuessString=wordu[Math.floor(Math.random()*wordu.length)];function initBoard(){let e=document.getElementById("game-board");for(let t=0;t<guess;t++){let t=document.createElement("div");t.className="letter-row";for(let e=0;e<5;e++){let e=document.createElement("div");e.className="letter-box",t.appendChild(e)}e.appendChild(t)}}function insertLetter(e){if(5===nextLetter)return;e=e.toLowerCase();let t=document.getElementsByClassName("letter-row")[6-guessesRemaining].children[nextLetter];animateCSS(t,"pulse"),t.textContent=e,t.classList.add("filled-box"),currentGuess.push(e),nextLetter+=1}function deleteLetter(){let e=document.getElementsByClassName("letter-row")[6-guessesRemaining].children[nextLetter-1];e.textContent="",e.classList.remove("filled-box"),currentGuess.pop(),nextLetter-=1}function checkGuess(){let e=document.getElementsByClassName("letter-row")[6-guessesRemaining],t="",n=Array.from(rightGuessString);for(const e of currentGuess)t+=e;if(5==t.length)if(wordu.includes(t)){for(let t=0;t<5;t++){let r="",s=e.children[t],o=currentGuess[t],a=n.indexOf(currentGuess[t]);-1===a?r="var(--gray)":(r=currentGuess[t]===n[t]?"var(--green)":"var(--yellow)",n[a]="#"),setTimeout(()=>{animateCSS(s,"flipInX"),s.style.backgroundColor=r,s.style.color="var(--white)",shadeKeyBoard(o,r)},250*t)}if(t===rightGuessString)return toastr.success("啊！你终于猜对了！游戏结束！！！"),void(guessesRemaining=0);currentGuess=[],nextLetter=0,0===(guessesRemaining-=1)&&(toastr.error("嘿嘿嘿！菜就多练！"),toastr.info(`真正的词是：“${rightGuessString}”，没想到吧！`))}else toastr.error("似乎没有这个单词欸……");else toastr.error("你输入完了吗？")}function shadeKeyBoard(e,t){for(const n of document.getElementsByClassName("keyboard-button"))if(n.textContent===e){let e=n.style.backgroundColor;if("var(--green)"===e)return;if("var(--yellow)"===e&&"var(--green)"!==t)return;n.style.backgroundColor=t,n.style.color="var(--white)";break}}document.getElementsByClassName("cheat")[0].innerHTML+="Ans="+rightGuessString;initBoard();document.addEventListener("keyup",e=>{if(0===guessesRemaining)return;let t=String(e.key);if("Backspace"===t&&0!==nextLetter)return void deleteLetter();if("Enter"===t)return void checkGuess();let n=t.match(/[a-z]/gi);!n||n.length>1||insertLetter(t)}),document.getElementById("keyboard-cont").addEventListener("click",e=>{const t=e.target;if(!t.classList.contains("keyboard-button"))return;let n=t.textContent;"Del"===n&&(n="Backspace"),document.dispatchEvent(new KeyboardEvent("keyup",{key:n}))}),document.getElementById("delddd").addEventListener("click",e=>{document.dispatchEvent(new KeyboardEvent("keyup",{key:"Backspace"}))}),document.getElementById("enteee").addEventListener("click",e=>{document.dispatchEvent(new KeyboardEvent("keyup",{key:"Enter"}))});const animateCSS=(e,t,n="animate__")=>new Promise((r,s)=>{const o=`${n}${t}`,a=e;a.style.setProperty("--animate-duration","0.3s"),a.classList.add(`${n}animated`,o),a.addEventListener("animationend",function(e){e.stopPropagation(),a.classList.remove(`${n}animated`,o),r("Animation ended")},{once:!0})});
